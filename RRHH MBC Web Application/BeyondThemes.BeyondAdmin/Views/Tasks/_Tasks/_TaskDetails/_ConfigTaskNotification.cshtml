@model Model.EditTaskNoficationModel
@{ 
    string id_modal = "modal_configTaskNotification" + Model.id_notification;
    string isTelegramChecked = Model.isTelegram == "True" ? "checked" : "";
    string isInternChecked = Model.isIntern == "True" ? "checked" : "";
    string isEmailChecked = Model.isEmail == "True" ? "checked" : "";
    string id_form = "form_configTaskNotification" + Model.id_notification;
}
<div class="modal fade" id="@id_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document" width="70%">
        <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Editar Notificación</h4>
                </div>
                <div class="modal-body">
                    @using (Ajax.BeginForm("_EditTaskNotification", "Tasks", new AjaxOptions { HttpMethod = "PUT", OnSuccess= "TaskNotificationEditedSucces", OnFailure = "TaskNotificationEditedFailure" }, new { @id = @id_form }))
                    {
                        @Html.AntiForgeryToken()
                        @Html.HiddenFor(m => m.id_notification)
                        @Html.HiddenFor(m => m.id_task)
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.LabelFor(m => m.message)
                                @Html.TextAreaFor(m => m.message, new { @class = "form-control", @placeholder = "", @rows = "5" })
                                @Html.ValidationMessageFor(m => m.message, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <h4>Tipos:</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-offset-1 col-xs-6">
                            <div class="col-xs-4">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" class="colored-success" name="isTelegram" @isTelegramChecked/>
                                        <span class="text">Telegram</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-xs-4">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" class="colored-success" name="isIntern" @isInternChecked/>
                                        <span class="text">Interna</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-xs-4">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" class="colored-success" name="isEmail" @isEmailChecked/>
                                        <span class="text">Correo</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    }
                    <div class="row" >
                        <div class="col-xs-12">
                            <h4>Notficar a:</h4>
                        </div>
                        <div class="row" >
                            <div class="col-xs-offset-5 col-lg-7 col-md-7">
                                @using (Ajax.BeginForm("_AddTaskNotificationUser", "Tasks", new AjaxOptions { HttpMethod = "POST", OnSuccess = "NotificationUserAddedSuccess", OnFailure = "NotificationUSerAddedFailure" }))
                                {
                                    @Html.AntiForgeryToken()
                                    @Html.HiddenFor(model => model.id_notification);
                                    <div class="col-xs-11">
                                        @Html.DropDownListFor(model => model.selected_userParticipants_id, Model._ParticipantsSelect, new { @class = "form-control select2", @style = "width:100%", @multiple = "multiple" })
                                        @Html.ValidationMessageFor(model => model.selected_userParticipants_id, "", new { @class = "text-danger" })
                                    </div>
                                    <div class="col-xs-1">
                                        <button class="btn btn-success" type="submit" style="float:right" data-toggle="modal" data-target="#modal_addParticipantUser"><i class="fa fa-user-plus"></i></button>
                                    </div>
                                }
                            </div>
                        </div>
                        <div class="col-xs-12" id="NotificationsUsersList" style="margin-top:30px">
                            @{ Html.RenderPartial("/Views/Tasks/_Tasks/_TaskDetails/_TaskNotificationsUsers.cshtml", new Model.TaskNotificationsUserModel(Model.taskNoficationDTO));}
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" form="@id_form">Guardar</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                </div>
        </div>
    </div>
</div>
